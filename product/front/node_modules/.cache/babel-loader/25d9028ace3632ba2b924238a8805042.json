{"ast":null,"code":"var _jsxFileName = \"/home/techmanager/Documents/tkiener-blablapp-react/product/front/src/CreateConversation.jsx\";\nimport React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport Header from './Header';\nimport './CreateConversation.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass CreateConversation extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getContacts = () => {\n      fetch('http://localhost:5000/conversation-list').then(response => {\n        return response.json();\n      }).then(convers_list => {\n        console.log('UserHome/getConversations/convers_list', convers_list); // Sauvegarde de l'état du composant avec le résultat de la réponse parsée de la DB\n\n        this.setState({\n          contacts: convers_list.contacts\n        });\n      }, error => {\n        this.setState({\n          error\n        });\n      });\n    };\n\n    this.state = {\n      contacts: []\n    };\n    this.createConversation = this.createConversation.bind(this);\n  }\n\n  componentDidMount() {\n    this.getContacts();\n  }\n\n  createConversation(ev) {\n    ev.preventDefault();\n    const data = new FormData();\n    data.append('email', this.emails.value);\n    data.append('name', this.name.value);\n    fetch('http://localhost:5000/create_conversation', {\n      method: 'POST',\n      body: data\n    }).then(response => {\n      return response.text();\n    }).then(data => {\n      let created_conv = data;\n      console.log(created_conv);\n      console.log(typeof created_conv);\n\n      if (created_conv.includes('conversation_id')) {\n        this.props.history.push('/conversation-list');\n      } else {\n        alert('Echec de la création de la conversation');\n      } // window.location.reload(false);\n\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.createConversation,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-style\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"\",\n              children: \"Emails des participants: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"emails\",\n              class: \"input\",\n              type: \"text\",\n              ref: ref => {\n                this.emails = ref;\n              },\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"emails-syntaxe-requirement\",\n              children: \"Si plusieurs adresses, les s\\xE9parer par des virgule espace: julien@blabla.fr, laura@blabla.fr, ...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-style\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              for: \"\",\n              children: \"Nom de la conversation: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              ref: ref => {\n                this.name = ref;\n              },\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            children: \"Cr\\xE9er conversation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default _c = withRouter(CreateConversation);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/home/techmanager/Documents/tkiener-blablapp-react/product/front/src/CreateConversation.jsx"],"names":["React","withRouter","Header","CreateConversation","Component","constructor","props","getContacts","fetch","then","response","json","convers_list","console","log","setState","contacts","error","state","createConversation","bind","componentDidMount","ev","preventDefault","data","FormData","append","emails","value","name","method","body","text","created_conv","includes","history","push","alert","render","ref"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {withRouter} from 'react-router-dom';\nimport Header from './Header';\nimport './CreateConversation.css'\n\nclass CreateConversation extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      contacts: [],\n    }\n\n    this.createConversation = this.createConversation.bind(this);\n  }\n\n  componentDidMount() {\n    this.getContacts()\n  }\n\n  createConversation(ev) {\n    ev.preventDefault();\n  \n    const data = new FormData();\n    data.append('email', this.emails.value);\n    data.append('name', this.name.value);\n\n    fetch('http://localhost:5000/create_conversation', {\n    method: 'POST',\n    body: data,\n  })\n  .then((response) => {\n    return response.text();\n  })\n  .then((data) => {\n    let created_conv = data\n    console.log(created_conv)\n    console.log(typeof created_conv)\n    if (created_conv.includes('conversation_id')) {\n      this.props.history.push('/conversation-list')\n    }\n    else {\n      alert('Echec de la création de la conversation')\n    }\n    // window.location.reload(false);\n  });\n  }\n\n  getContacts = () => {\n    fetch('http://localhost:5000/conversation-list')\n    .then(response => {\n      return(\n        response.json()\n    )})\n    .then(convers_list => {\n      console.log('UserHome/getConversations/convers_list', convers_list)\n      // Sauvegarde de l'état du composant avec le résultat de la réponse parsée de la DB\n      this.setState({\n        contacts : convers_list.contacts\n      });\n          }, (error) => {\n            this.setState({\n              error\n            });\n          }\n      )\n  };\n\n\n\n  render() {\n    \n      return (\n      <> \n      <Header />\n        <form onSubmit={this.createConversation}>\n          <div className=\"flex\">\n              <div className=\"input-style\">\n                <label for=\"\">Emails des participants: </label>\n                <input id=\"emails\" class=\"input\" type=\"text\" ref={(ref) => { this.emails = ref; }} required />\n                <div id=\"emails-syntaxe-requirement\">Si plusieurs adresses, les séparer par des virgule espace: julien@blabla.fr, laura@blabla.fr, ...</div>\n              </div>\n              <div className=\"input-style\">\n                <label for=\"\">Nom de la conversation: </label>\n                <input type=\"text\" ref={(ref) => { this.name = ref; }} required></input>\n              </div>\n          </div>\n          <div>\n          <button>Créer conversation</button>\n          </div>\n        </form>\n      </>\n      );\n  }\n}\n\nexport default withRouter(CreateConversation);"]},"metadata":{},"sourceType":"module"}