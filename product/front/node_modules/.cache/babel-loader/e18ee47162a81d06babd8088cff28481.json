{"ast":null,"code":"var _jsxFileName = \"/home/techmanager/Documents/tkiener-blablapp-react/product/front/src/Register.jsx\";\nimport React from 'react'; // import './Modal.css';\n\nimport { withRouter } from 'react-router-dom';\nimport './Register.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass Register extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleRegister = this.handleRegister.bind(this);\n  }\n\n  handleRegister(ev) {\n    ev.preventDefault();\n    console.log('toto');\n    const data = new FormData();\n    data.append('username', this.username.value);\n    data.append('email', this.email.value);\n    data.append('gdpr', this.rgpd.value);\n    console.log(this.rgpd.value);\n\n    if (this.password1.value === this.password2.value) {\n      data.append('password', this.password2.value);\n      fetch('http://localhost:5000/register', {\n        method: 'POST',\n        body: data\n      }).then(response => {\n        // console.log(response.text());\n        this.props.close();\n        return response.text();\n      }).then(data => {\n        console.log(data);\n\n        if (data.includes('true')) {\n          this.props.history.push('/conversation-list');\n        } else {\n          alert('Registration failed');\n        } // window.location.reload(false);\n\n      });\n    } else {\n      document.getElementById(\"warning-password\").textContent = \"Password not confirmed\";\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        id: \"simple-modal-title\",\n        children: \"INSCRIVEZ VOUS\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.handleRegister,\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/red-cross.png\",\n          className: \"red-cross\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"box\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"\",\n            children: \"Votre nom: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"username\",\n            class: \"input\",\n            type: \"text\",\n            ref: ref => {\n              this.username = ref;\n            },\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"\",\n            children: \"Email: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            ref: ref => {\n              this.email = ref;\n            },\n            type: \"text\",\n            name: \"\",\n            id: \"\",\n            cols: \"30\",\n            rows: \"10\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"\",\n            children: \"Password: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            ref: ref => {\n              this.password1 = ref;\n            },\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"\",\n            children: \"Confirm password: \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            ref: ref => {\n              this.password2 = ref;\n            },\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            ref: ref => {\n              this.rgpd = ref;\n            },\n            required: true,\n            value: \"true\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"rgpd-label\",\n            for: \"rgpd\",\n            children: \"Cochez cette case si vous acceptez le traitement automatis\\xE9 de vos donn\\xE9es par nos services, dans le strict respect de la r\\xE9glementation en vigueur (RGPD)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"warning-password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"button\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            children: \"Envoyer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default _c = withRouter(Register);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/home/techmanager/Documents/tkiener-blablapp-react/product/front/src/Register.jsx"],"names":["React","withRouter","Register","Component","constructor","props","handleRegister","bind","ev","preventDefault","console","log","data","FormData","append","username","value","email","rgpd","password1","password2","fetch","method","body","then","response","close","text","includes","history","push","alert","document","getElementById","textContent","render","ref"],"mappings":"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","sourcesContent":["import React from 'react';\n// import './Modal.css';\nimport {withRouter} from 'react-router-dom';\nimport './Register.css'\n\nclass Register extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleRegister = this.handleRegister.bind(this);\n  }\n\n\n  handleRegister(ev) {\n    ev.preventDefault();\n    console.log('toto')\n  \n    const data = new FormData();\n    data.append('username', this.username.value);\n    data.append('email', this.email.value);\n    data.append('gdpr', this.rgpd.value)\n    console.log(this.rgpd.value)\n    if (this.password1.value === this.password2.value) {\n      data.append('password', this.password2.value);\n    \n\n      fetch('http://localhost:5000/register', {\n        method: 'POST',\n        body: data,\n      })\n        .then((response) => {\n          // console.log(response.text());\n          this.props.close();\n          return response.text()\n        })\n        .then((data) => {\n          console.log(data)\n          if (data.includes('true')) {\n            this.props.history.push('/conversation-list')\n          }\n          else {\n            alert('Registration failed')\n          }\n        // window.location.reload(false);\n      })\n    }\n    else {\n      document.getElementById(\"warning-password\").textContent = \"Password not confirmed\"\n    }\n  }\n\n  render() {\n    \n      return (\n      <> \n        <h1 id=\"simple-modal-title\">INSCRIVEZ VOUS</h1>\n        <form onSubmit={this.handleRegister}>\n        <img src=\"/red-cross.png\" className=\"red-cross\"/>\n          <div className=\"box\">\n            <label for=\"\">Votre nom: </label>\n            <input id=\"username\" class=\"input\" type=\"text\" ref={(ref) => { this.username = ref; }} required />\n            <label for=\"\">Email: </label>\n            <input ref={(ref) => { this.email = ref; }} type=\"text\"name=\"\" id=\"\" cols=\"30\" rows=\"10\" required/>\n            <label for=\"\">Password: </label>\n            <input type=\"password\" ref={(ref) => { this.password1 = ref; }} required/>\n            <label for=\"\">Confirm password: </label>\n            <input type=\"password\" ref={(ref) => { this.password2 = ref; }} required/>\n          </div>\n          <div>\n            <input type=\"checkbox\" ref={(ref) => { this.rgpd = ref; }} required value=\"true\"/>\n            <label className=\"rgpd-label\" for=\"rgpd\">Cochez cette case si vous acceptez le traitement automatisé de vos données par nos services, dans le strict respect de la réglementation en vigueur (RGPD)</label>\n          </div>\n          <div id =\"warning-password\"></div>\n          <div className=\"button\">\n          <button>Envoyer</button>\n          </div>\n        </form>\n      </>\n      );\n  }\n}\n\nexport default withRouter(Register);"]},"metadata":{},"sourceType":"module"}